/***Copyright(c)MetaPlatforms,Inc.andaffiliates.**ThissourcecodeislicensedundertheMITlicensefoundinthe*LICENSEfileintherootdirectoryofthissourcetree.**@flow*/import{useSyncExternalStore}from'use-sync-external-store/shim';//Hookusedforsafelymanagingsubscriptionsinconcurrentmode.////Inordertoavoidremovingandre-addingsubscriptionseachtimethishookiscalled,//theparameterspassedtothishookshouldbememoizedinsomewayâ€“//eitherbywrappingtheentireparamsobjectwithuseMemo()//orbywrappingtheindividualcallbackswithuseCallback().exportfunctionuseSubscription<Value>({//(Synchronously)returnsthecurrentvalueofoursubscription.getCurrentValue,//Thisfunctionispassedaneventhandlertoattachtothesubscription.//Itshouldreturnanunsubscribefunctionthatremovesthehandler.subscribe,}:{getCurrentValue:()=>Value,subscribe:(callback:Function)=>()=>void,}):Value{returnuseSyncExternalStore(subscribe,getCurrentValue);}