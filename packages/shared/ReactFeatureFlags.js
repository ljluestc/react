/***Copyright(c)MetaPlatforms,Inc.andaffiliates.**ThissourcecodeislicensedundertheMITlicensefoundinthe*LICENSEfileintherootdirectoryofthissourcetree.**@flowstrict*///-----------------------------------------------------------------------------//Landorremove(zeroeffort)////Flagsthatcanlikelybedeletedorlandedwithoutconsequences//-----------------------------------------------------------------------------exportconstenableComponentStackLocations=true;//-----------------------------------------------------------------------------//Killswitch////Flagsthatexistsolelytoturnoffachangeincaseitcausesaregression//whenitrollsouttoprod.Weshouldremovetheseassoonaspossible.//-----------------------------------------------------------------------------//-----------------------------------------------------------------------------//Landorremove(moderateeffort)////Flagsthatcanbeprobablydeletedorlanded,butmightrequireextraeffort//likemigratinginternalcallersorperformancetesting.//-----------------------------------------------------------------------------//TODO:FinishrollingoutinwwwexportconstenableClientRenderFallbackOnTextMismatch=true;//Notsureifwwwstillusesthis.Wedon'thaveareplacementbutwhateverwe//replaceitwithwilllikelybedifferentthanwhat'salreadythere,sowe//probablyshouldjustdeleteitaslongasnothinginwwwreliesonit.exportconstenableSchedulerDebugging=false;//NeedtoremovedidTimeoutargumentfromSchedulerbeforelandingexportconstdisableSchedulerTimeoutInWorkLoop=false;//ThiswillbreaksomeinternaltestsatMetasoweneedtogatethisuntil//thosecanbefixed.exportconstenableDeferRootSchedulingToMicrotask=true;//-----------------------------------------------------------------------------//Slatedforremovalinthefuture(significanteffort)////Theseareexperimentsthatdidn'tworkout,andnevershipped,butwecan't//deletefromthecodebaseuntilwemigrateinternalcallers.//-----------------------------------------------------------------------------//Addacallbackpropertytosuspensetonotifywhichpromisesarecurrently//intheupdatequeue.Thisallowsreportingandtracingofwhatiscausing//theusertoseealoadingstate.////Alsoallowshydrationcallbackstofirewhenadehydratedboundarygets//hydratedordeleted.////ThiswilleventuallybereplacedbytheTransitionTracingproposal.exportconstenableSuspenseCallback=false;//ExperimentalScopesupport.exportconstenableScopeAPI=false;//ExperimentalCreateEventHandleAPI.exportconstenableCreateEventHandleAPI=false;//SupportlegacyPrimersupportoninternalFBwwwexportconstenableLegacyFBSupport=false;//-----------------------------------------------------------------------------//Ongoingexperiments////Thesearefeaturesthatwe'reeitheractivelyexploringorarereasonably//likelytoincludeinanupcomingrelease.//-----------------------------------------------------------------------------exportconstenableCache=true;exportconstenableLegacyCache=__EXPERIMENTAL__;exportconstenableCacheElement=__EXPERIMENTAL__;exportconstenableFetchInstrumentation=true;exportconstenableFormActions=__EXPERIMENTAL__;exportconstenableBinaryFlight=__EXPERIMENTAL__;exportconstenableTransitionTracing=false;//Noknownbugs,butneedsperformancetestingexportconstenableLazyContextPropagation=false;//FB-onlyusage.ThenewAPIhasdifferentsemantics.exportconstenableLegacyHidden=false;//Enablesunstable_avoidThisFallbackfeatureinFiberexportconstenableSuspenseAvoidThisFallback=false;//Enablesunstable_avoidThisFallbackfeatureinFizzexportconstenableSuspenseAvoidThisFallbackFizz=false;exportconstenableCPUSuspense=__EXPERIMENTAL__;exportconstenableHostSingletons=true;exportconstenableFloat=true;//Enablesunstable_useMemoCachehook,intendedasacompilationtargetfor//auto-memoization.exportconstenableUseMemoCacheHook=__EXPERIMENTAL__;exportconstenableUseEffectEventHook=__EXPERIMENTAL__;//Testinwwwbeforeenablinginopensource.//EnablesDOM-servertostreamitsinstructionsetasdata-attributes//(handledwithanMutationObserver)insteadofinline-scriptsexportconstenableFizzExternalRuntime=true;//PerformancerelatedtestexportconstdiffInCommitPhase=__EXPERIMENTAL__;exportconstenableAsyncActions=__EXPERIMENTAL__;exportconstalwaysThrottleRetries=true;//-----------------------------------------------------------------------------//ChoppingBlock////Plannedfeaturedeprecationsandbreakingchanges.Sortedroughlyinorderof//whenweplantoenablethem.//-----------------------------------------------------------------------------//ThisflagenablesStrictEffectsbydefault.We'renotturningthisonuntil//after18becauseitrequiresmigrationwork.Recommendationistouse//<StrictMode/>tograduallyupgradecomponents.//IfTRUE,treesrenderedwithcreateRootwillbeStrictEffectsMode.//IfFALSE,thesetreeswillbeStrictLegacyMode.exportconstcreateRootStrictEffectsByDefault=false;exportconstdisableModulePatternComponents=false;exportconstdisableLegacyContext=false;exportconstenableUseRefAccessWarning=false;//Enablestimeslicingforupdatesthataren'twrappedinstartTransition.exportconstforceConcurrentByDefaultForTesting=false;exportconstenableUnifiedSyncLane=__EXPERIMENTAL__;//Addsanopt-intotimeslicingforupdatesthataren'twrappedinstartTransition.exportconstallowConcurrentByDefault=false;//-----------------------------------------------------------------------------//ReactDOMChoppingBlock////SimilartomainChoppingBlockbutonlyflagsrelatedtoReactDOM.Theseare//groupedbecausewewilllikelybatchallofthemintoasinglemajorrelease.//-----------------------------------------------------------------------------//DisablesupportforcommentnodesasReactDOMcontainers.Alreadydisabled//inopensource,butwwwcodebasestillreliesonit.Needtoremove.exportconstdisableCommentsAsDOMContainers=true;//Disablejavascript:URLstringsinhrefforXSSprotection.exportconstdisableJavaScriptURLs=false;exportconstenableTrustedTypesIntegration=false;//Preventthevalueandcheckedattributesfromsyncingwiththeirrelated//DOMpropertiesexportconstdisableInputAttributeSyncing=false;//RemoveIEandMsAppspecificworkaroundsforinnerHTMLexportconstdisableIEWorkarounds=__EXPERIMENTAL__;//FiltercertainDOMattributes(e.g.src,href)iftheirvaluesareempty//strings.Thispreventse.g.<imgsrc="">frommakinganunnecessaryHTTP//requestforcertainbrowsers.exportconstenableFilterEmptyStringAttributesDOM=__EXPERIMENTAL__;//Changesthebehaviorforrenderingcustomelementsinbothserverrendering//andclientrendering,mostlytoallowJSXattributestoapplytothecustom//element'sobjectpropertiesinsteadofonlyHTMLattributes.//https://github.com/facebook/react/issues/11347exportconstenableCustomElementPropertySupport=__EXPERIMENTAL__;//Disableschildrenfor<textarea>elementsexportconstdisableTextareaChildren=false;//-----------------------------------------------------------------------------//DebuggingandDevTools//-----------------------------------------------------------------------------//Addsusertimingmarksfore.g.stateupdates,suspense,andworkloopstuff,//foranexperimentaltimelinetool.exportconstenableSchedulingProfiler=__PROFILE__;//Helpsidentifysideeffectsinrender-phaselifecyclehooksandsetState//reducersbydoubleinvokingtheminStrictLegacyMode.exportconstdebugRenderPhaseSideEffectsForStrictMode=__DEV__;//Topreservethe"Pauseoncaughtexceptions"behaviorofthedebugger,we//replaythebeginphaseofafailedcomponentinsideinvokeGuardedCallback.exportconstreplayFailedUnitOfWorkWithInvokeGuardedCallback=__DEV__;//GatheradvancedtimingmetricsforProfilersubtrees.exportconstenableProfilerTimer=__PROFILE__;//Recorddurationsforcommitandpassiveeffectsphases.exportconstenableProfilerCommitHooks=__PROFILE__;//PhaseparampassedtoonRendercallbackdifferentiatesbetweenan"update"anda"cascading-update".exportconstenableProfilerNestedUpdatePhase=__PROFILE__;//Addsverboseconsoleloggingfore.g.stateupdates,suspense,andworkloop//stuff.IntendedtoenableReactcorememberstomoreeasilydebugscheduling//issuesinDEVbuilds.exportconstenableDebugTracing=false;//TrackwhichFiber(s)schedulerenderwork.exportconstenableUpdaterTracking=__PROFILE__;exportconstenableServerContext=true;//Internalonly.exportconstenableGetInspectorDataForInstanceInProduction=false;//ProfilerAPIacceptsafunctiontobecalledwhenanestedupdateisscheduled.//Thiscallbackacceptsthecomponenttype(classinstanceorfunction)theupdateisscheduledfor.exportconstenableProfilerNestedUpdateScheduledHook=false;exportconstconsoleManagedByDevToolsDuringStrictMode=true;//Modern<StrictMode/>behaviouralignsmorewithwhatcomponents//componentswillencounterinproduction,especiallywhenusedWith<Offscreen/>.//TODO:cleanuplegacy<StrictMode/>oncetestspassWWW.exportconstuseModernStrictMode=false;exportconstenableDO_NOT_USE_disableStrictPassiveEffect=false;