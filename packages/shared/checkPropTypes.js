/***Copyright(c)MetaPlatforms,Inc.andaffiliates.**ThissourcecodeislicensedundertheMITlicensefoundinthe*LICENSEfileintherootdirectoryofthissourcetree.**@flow*/constloggedTypeFailures:{[string]:boolean}={};import{describeUnknownElementTypeFrameInDEV}from'shared/ReactComponentStackFrame';importReactSharedInternalsfrom'shared/ReactSharedInternals';importhasOwnPropertyfrom'shared/hasOwnProperty';constReactDebugCurrentFrame=ReactSharedInternals.ReactDebugCurrentFrame;functionsetCurrentlyValidatingElement(element:any){if(__DEV__){if(element){constowner=element._owner;conststack=describeUnknownElementTypeFrameInDEV(element.type,element._source,owner?owner.type:null,);ReactDebugCurrentFrame.setExtraStackFrame(stack);}else{ReactDebugCurrentFrame.setExtraStackFrame(null);}}}exportdefaultfunctioncheckPropTypes(typeSpecs:Object,values:Object,location:string,componentName:?string,element?:any,):void{if(__DEV__){//$FlowFixMe[incompatible-use]ThisisokaybutFlowdoesn'tknowit.consthas=Function.call.bind(hasOwnProperty);for(consttypeSpecNameintypeSpecs){if(has(typeSpecs,typeSpecName)){leterror;//Proptypevalidationmaythrow.Incasetheydo,wedon'twantto//failtherenderphasewhereitdidn'tfailbefore.Sowelogit.//Afterthesehavebeencleanedup,we'llletthemthrow.try{//Thisisintentionallyaninvariantthatgetscaught.It'sthesame//behavioraswithoutthisstatementexceptwithabettermessage.if(typeoftypeSpecs[typeSpecName]!=='function'){//eslint-disable-next-linereact-internal/prod-error-codesconsterr=Error((componentName||'Reactclass')+':'+location+'type`'+typeSpecName+'`isinvalid;'+'itmustbeafunction,usuallyfromthe`prop-types`package,butreceived`'+typeoftypeSpecs[typeSpecName]+'`.'+'Thisoftenhappensbecauseoftypossuchas`PropTypes.function`insteadof`PropTypes.func`.',);err.name='InvariantViolation';throwerr;}error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED',);}catch(ex){error=ex;}if(error&&!(errorinstanceofError)){setCurrentlyValidatingElement(element);console.error('%s:typespecificationof%s'+'`%s`isinvalid;thetypechecker'+'functionmustreturn`null`oran`Error`butreturneda%s.'+'Youmayhaveforgottentopassanargumenttothetypechecker'+'creator(arrayOf,instanceOf,objectOf,oneOf,oneOfType,and'+'shapeallrequireanargument).',componentName||'Reactclass',location,typeSpecName,typeoferror,);setCurrentlyValidatingElement(null);}if(errorinstanceofError&&!(error.messageinloggedTypeFailures)){//Onlymonitorthisfailureoncebecausetheretendstobealotofthe//sameerror.loggedTypeFailures[error.message]=true;setCurrentlyValidatingElement(element);console.error('Failed%stype:%s',location,error.message);setCurrentlyValidatingElement(null);}}}}}