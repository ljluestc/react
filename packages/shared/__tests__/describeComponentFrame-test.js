/***Copyright(c)MetaPlatforms,Inc.andaffiliates.**ThissourcecodeislicensedundertheMITlicensefoundinthe*LICENSEfileintherootdirectoryofthissourcetree.**@emailsreact-core*/'usestrict';letReact;letReactDOM;describe('Componentstacktracedisplaying',()=>{beforeEach(()=>{React=require('react');ReactDOM=require('react-dom');});//@gate!enableComponentStackLocations||!__DEV__it('shouldprovidefilenamesinstacktraces',()=>{classComponentextendsReact.Component{render(){return[<span>a</span>,<span>b</span>];}}spyOnDev(console,'error');constcontainer=document.createElement('div');constfileNames={'':'','/':'','\\':'',Foo:'Foo','Bar/Foo':'Foo','Bar\\Foo':'Foo','Baz/Bar/Foo':'Foo','Baz\\Bar\\Foo':'Foo','Foo.js':'Foo.js','Foo.jsx':'Foo.jsx','/Foo.js':'Foo.js','/Foo.jsx':'Foo.jsx','\\Foo.js':'Foo.js','\\Foo.jsx':'Foo.jsx','Bar/Foo.js':'Foo.js','Bar/Foo.jsx':'Foo.jsx','Bar\\Foo.js':'Foo.js','Bar\\Foo.jsx':'Foo.jsx','/Bar/Foo.js':'Foo.js','/Bar/Foo.jsx':'Foo.jsx','\\Bar\\Foo.js':'Foo.js','\\Bar\\Foo.jsx':'Foo.jsx','Bar/Baz/Foo.js':'Foo.js','Bar/Baz/Foo.jsx':'Foo.jsx','Bar\\Baz\\Foo.js':'Foo.js','Bar\\Baz\\Foo.jsx':'Foo.jsx','/Bar/Baz/Foo.js':'Foo.js','/Bar/Baz/Foo.jsx':'Foo.jsx','\\Bar\\Baz\\Foo.js':'Foo.js','\\Bar\\Baz\\Foo.jsx':'Foo.jsx','C:\\funnylong(path)/Foo.js':'Foo.js','C:\\funnylong(path)/Foo.jsx':'Foo.jsx','index.js':'index.js','index.jsx':'index.jsx','/index.js':'index.js','/index.jsx':'index.jsx','\\index.js':'index.js','\\index.jsx':'index.jsx','Bar/index.js':'Bar/index.js','Bar/index.jsx':'Bar/index.jsx','Bar\\index.js':'Bar/index.js','Bar\\index.jsx':'Bar/index.jsx','/Bar/index.js':'Bar/index.js','/Bar/index.jsx':'Bar/index.jsx','\\Bar\\index.js':'Bar/index.js','\\Bar\\index.jsx':'Bar/index.jsx','Bar/Baz/index.js':'Baz/index.js','Bar/Baz/index.jsx':'Baz/index.jsx','Bar\\Baz\\index.js':'Baz/index.js','Bar\\Baz\\index.jsx':'Baz/index.jsx','/Bar/Baz/index.js':'Baz/index.js','/Bar/Baz/index.jsx':'Baz/index.jsx','\\Bar\\Baz\\index.js':'Baz/index.js','\\Bar\\Baz\\index.jsx':'Baz/index.jsx','C:\\funnylong(path)/index.js':'funnylong(path)/index.js','C:\\funnylong(path)/index.jsx':'funnylong(path)/index.jsx',};Object.keys(fileNames).forEach((fileName,i)=>{Component.displayName='Component'+i;ReactDOM.render(<Component__source={{fileName,lineNumber:i}}/>,container,);});if(__DEV__){leti=0;expect(console.error).toHaveBeenCalledTimes(Object.keys(fileNames).length,);for(constfileNameinfileNames){if(!fileNames.hasOwnProperty(fileName)){continue;}constargs=console.error.mock.calls[i];conststack=args[args.length-1];constexpected=fileNames[fileName];expect(stack).toContain(`at${expected}:`);i++;}}});});