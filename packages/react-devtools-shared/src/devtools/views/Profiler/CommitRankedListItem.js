/***Copyright(c)MetaPlatforms,Inc.andaffiliates.**ThissourcecodeislicensedundertheMITlicensefoundinthe*LICENSEfileintherootdirectoryofthissourcetree.**@flow*/import*asReactfrom'react';import{memo,useCallback,useContext}from'react';import{areEqual}from'react-window';import{minBarWidth}from'./constants';import{getGradientColor}from'./utils';importChartNodefrom'./ChartNode';import{SettingsContext}from'../Settings/SettingsContext';importtype{ItemData}from'./CommitRanked';typeProps={data:ItemData,index:number,style:Object,...};functionCommitRankedListItem({data,index,style}:Props){const{chartData,onElementMouseEnter,onElementMouseLeave,scaleX,selectedFiberIndex,selectFiber,width,}=data;constnode=chartData.nodes[index];const{lineHeight}=useContext(SettingsContext);consthandleClick=useCallback((event:$FlowFixMe)=>{event.stopPropagation();const{id,name}=node;selectFiber(id,name);},[node,selectFiber],);consthandleMouseEnter=()=>{const{id,name}=node;onElementMouseEnter({id,name});};consthandleMouseLeave=()=>{onElementMouseLeave();};//ListitemsareabsolutelypositionedusingtheCSS"top"attribute.//The"left"valuewillalwaysbe0.//Sinceheightisfixed,andwidthisbasedonthenode'sduration,//Wecanignorethosevaluesaswell.consttop=parseInt(style.top,10);return(<ChartNodecolor={getGradientColor(node.value/chartData.maxValue)}height={lineHeight}isDimmed={index<selectedFiberIndex}key={node.id}label={node.label}onClick={handleClick}onMouseEnter={handleMouseEnter}onMouseLeave={handleMouseLeave}width={Math.max(minBarWidth,scaleX(node.value,width))}x={0}y={top}/>);}exportdefault(memo(CommitRankedListItem,areEqual,):React.ComponentType<Props>);