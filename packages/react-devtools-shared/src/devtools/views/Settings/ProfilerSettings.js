/***Copyright(c)MetaPlatforms,Inc.andaffiliates.**ThissourcecodeislicensedundertheMITlicensefoundinthe*LICENSEfileintherootdirectoryofthissourcetree.**@flow*/import*asReactfrom'react';import{useCallback,useContext,useMemo,useRef}from'react';import{useSubscription}from'../hooks';import{StoreContext}from'../context';import{ProfilerContext}from'react-devtools-shared/src/devtools/views/Profiler/ProfilerContext';importstylesfrom'./SettingsShared.css';exportdefaultfunctionProfilerSettings(_:{}):React.Node{const{isCommitFilterEnabled,minCommitDuration,setIsCommitFilterEnabled,setMinCommitDuration,}=useContext(ProfilerContext);conststore=useContext(StoreContext);constrecordChangeDescriptionsSubscription=useMemo(()=>({getCurrentValue:()=>store.recordChangeDescriptions,subscribe:(callback:Function)=>{store.addListener('recordChangeDescriptions',callback);return()=>store.removeListener('recordChangeDescriptions',callback);},}),[store],);constrecordChangeDescriptions=useSubscription<boolean>(recordChangeDescriptionsSubscription,);constupdateRecordChangeDescriptions=useCallback(({currentTarget}:$FlowFixMe)=>{store.recordChangeDescriptions=currentTarget.checked;},[store],);constupdateMinCommitDuration=useCallback((event:SyntheticEvent<HTMLInputElement>)=>{constnewValue=parseFloat(event.currentTarget.value);setMinCommitDuration(Number.isNaN(newValue)||newValue<=0?0:newValue,);},[setMinCommitDuration],);constupdateIsCommitFilterEnabled=useCallback((event:SyntheticEvent<HTMLInputElement>)=>{constchecked=event.currentTarget.checked;setIsCommitFilterEnabled(checked);if(checked){if(minCommitDurationInputRef.current!==null){minCommitDurationInputRef.current.focus();}}},[setIsCommitFilterEnabled],);constminCommitDurationInputRef=useRef<HTMLInputElement|null>(null);return(<divclassName={styles.Settings}><divclassName={styles.Setting}><label><inputtype="checkbox"checked={recordChangeDescriptions}onChange={updateRecordChangeDescriptions}/>{''}Recordwhyeachcomponentrenderedwhileprofiling.</label></div><divclassName={styles.Setting}><label><inputchecked={isCommitFilterEnabled}onChange={updateIsCommitFilterEnabled}type="checkbox"/>{''}Hidecommitsbelow</label>{''}<inputclassName={styles.Input}onChange={updateMinCommitDuration}ref={minCommitDurationInputRef}type="number"value={minCommitDuration}/>{''}(ms)</div></div>);}