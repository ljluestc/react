/***Copyright(c)MetaPlatforms,Inc.andaffiliates.**ThissourcecodeislicensedundertheMITlicensefoundinthe*LICENSEfileintherootdirectoryofthissourcetree.**@flow*/import*asReactfrom'react';import{useContext,useMemo}from'react';import{SettingsContext}from'./SettingsContext';import{StoreContext}from'../context';import{CHANGE_LOG_URL}from'react-devtools-shared/src/devtools/constants';importstylesfrom'./SettingsShared.css';functiongetChangeLogUrl(version:?string):string|null{if(!version){returnnull;}//Versionnumbersareintheformatof:<major>.<minor>.<patch>-<sha>//e.g."4.23.0-f0dd459e0"//GitHubCHANGELOGheadersareintheformatof:<major>.<minor>.<patch>//butthe"."arestrippedfromanchortags,becomming:<major><minor><patch>constversionAnchor=version.replace(/^(\d+)\.(\d+)\.(\d+).*/,'$1$2$3');return`${CHANGE_LOG_URL}#${versionAnchor}`;}exportdefaultfunctionGeneralSettings(_:{}):React.Node{const{displayDensity,setDisplayDensity,setTheme,setTraceUpdatesEnabled,theme,traceUpdatesEnabled,}=useContext(SettingsContext);const{backendVersion,supportsTraceUpdates}=useContext(StoreContext);constfrontendVersion=process.env.DEVTOOLS_VERSION;constshowBackendVersion=backendVersion&&backendVersion!==frontendVersion;return(<divclassName={styles.Settings}><divclassName={styles.Setting}><divclassName={styles.RadioLabel}>Theme</div><selectclassName={styles.Select}value={theme}onChange={({currentTarget})=>setTheme(currentTarget.value)}><optionvalue="auto">Auto</option><optionvalue="light">Light</option><optionvalue="dark">Dark</option></select></div><divclassName={styles.Setting}><divclassName={styles.RadioLabel}>Displaydensity</div><selectclassName={styles.Select}value={displayDensity}onChange={({currentTarget})=>setDisplayDensity(currentTarget.value)}><optionvalue="compact">Compact</option><optionvalue="comfortable">Comfortable</option></select></div>{supportsTraceUpdates&&(<divclassName={styles.Setting}><label><inputtype="checkbox"checked={traceUpdatesEnabled}onChange={({currentTarget})=>setTraceUpdatesEnabled(currentTarget.checked)}/>{''}Highlightupdateswhencomponentsrender.</label></div>)}<divclassName={styles.ReleaseNotes}>{showBackendVersion&&(<div><ulclassName={styles.VersionsList}><li><Versionlabel="DevToolsbackendversion:"version={backendVersion}/></li><li><Versionlabel="DevToolsfrontendversion:"version={frontendVersion}/></li></ul></div>)}{!showBackendVersion&&(<Versionlabel="DevToolsversion:"version={frontendVersion}/>)}</div></div>);}functionVersion({label,version}:{label:string,version:?string}){constchangelogLink=useMemo(()=>{returngetChangeLogUrl(version);},[version]);if(version==null){returnnull;}else{return(<>{label}{''}<aclassName={styles.ReleaseNotesLink}target="_blank"rel="noopenernoreferrer"href={changelogLink}>{version}</a></>);}}