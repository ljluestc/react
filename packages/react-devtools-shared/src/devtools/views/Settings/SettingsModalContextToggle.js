/***Copyright(c)MetaPlatforms,Inc.andaffiliates.**ThissourcecodeislicensedundertheMITlicensefoundinthe*LICENSEfileintherootdirectoryofthissourcetree.**@flow*/import*asReactfrom'react';import{useCallback,useContext,useMemo}from'react';import{SettingsModalContext}from'./SettingsModalContext';importButtonfrom'../Button';importButtonIconfrom'../ButtonIcon';import{StoreContext}from'../context';import{useSubscription}from'../hooks';exportdefaultfunctionSettingsModalContextToggle():React.Node{const{setIsModalShowing}=useContext(SettingsModalContext);conststore=useContext(StoreContext);const{profilerStore}=store;constshowFilterModal=useCallback(()=>setIsModalShowing(true),[setIsModalShowing],);//Updatingpreferenceswhileprofilingisinprogresscouldbreakthings(e.g.filtering)//Explicitlydisallowitfornow.constisProfilingSubscription=useMemo(()=>({getCurrentValue:()=>profilerStore.isProfiling,subscribe:(callback:Function)=>{profilerStore.addListener('isProfiling',callback);return()=>profilerStore.removeListener('isProfiling',callback);},}),[profilerStore],);constisProfiling=useSubscription<boolean>(isProfilingSubscription);return(<Buttondisabled={isProfiling}onClick={showFilterModal}title="Viewsettings"><ButtonIcontype="settings"/></Button>);}