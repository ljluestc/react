importReact,{createContext,useContext,useState}from'react';constTheme=createContext('light');exportdefaultTheme;exportfunctionThemeToggleButton({onChange}){lettheme=useContext(Theme);let[targetTheme,setTargetTheme]=useState(theme);functiontoggleTheme(){letnewTheme=theme==='light'?'dark':'light';//Highpri,responsiveupdate.setTargetTheme(newTheme);//Performtheactualthemechangeinaseparateupdate.setTimeout(()=>onChange(newTheme),0);}if(targetTheme!==theme){return'Switchingto'+targetTheme+'...';}return(<aclassName="link"onClick={toggleTheme}>Switchto{theme==='light'?'Dark':'Light'}theme</a>);}