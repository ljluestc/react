'usestrict';const{es5Paths,esNextPaths,}=require('./scripts/shared/pathsByLanguageVersion');constrestrictedGlobals=require('confusing-browser-globals');constOFF=0;constWARNING=1;constERROR=2;module.exports={extends:['prettier'],//StopESLintfromlookingforaconfigurationfileinparentfoldersroot:true,plugins:['babel','ft-flow','jest','no-for-of-loops','no-function-declare-after-return','react','react-internal',],parser:'hermes-eslint',parserOptions:{ecmaVersion:9,sourceType:'script',},//We'restricterthanthedefaultconfig,mostly.We'lloverrideafewrules//andthenenablesomeReactspecificones.rules:{'ft-flow/array-style-complex-type':[OFF,'verbose'],'ft-flow/array-style-simple-type':[OFF,'verbose'],//TODOshouldbeWARNING'ft-flow/boolean-style':ERROR,'ft-flow/no-dupe-keys':ERROR,'ft-flow/no-primitive-constructor-types':ERROR,'ft-flow/no-types-missing-file-annotation':OFF,//TODOshouldbeERROR'ft-flow/no-unused-expressions':ERROR,//'ft-flow/no-weak-types':WARNING,//'ft-flow/require-valid-file-annotation':ERROR,'no-cond-assign':OFF,'no-constant-condition':OFF,'no-control-regex':OFF,'no-debugger':ERROR,'no-dupe-args':ERROR,'no-dupe-keys':ERROR,'no-duplicate-case':WARNING,'no-empty-character-class':WARNING,'no-empty':OFF,'no-ex-assign':WARNING,'no-extra-boolean-cast':WARNING,'no-func-assign':ERROR,'no-invalid-regexp':WARNING,'no-irregular-whitespace':WARNING,'no-negated-in-lhs':ERROR,'no-obj-calls':ERROR,'no-regex-spaces':WARNING,'no-sparse-arrays':ERROR,'no-unreachable':ERROR,'use-isnan':ERROR,'valid-jsdoc':OFF,'block-scoped-var':OFF,complexity:OFF,'default-case':OFF,'guard-for-in':OFF,'no-alert':OFF,'no-caller':ERROR,'no-case-declarations':OFF,'no-div-regex':OFF,'no-else-return':OFF,'no-empty-pattern':WARNING,'no-eq-null':OFF,'no-eval':ERROR,'no-extend-native':WARNING,'no-extra-bind':WARNING,'no-fallthrough':WARNING,'no-implicit-coercion':OFF,'no-implied-eval':ERROR,'no-invalid-this':OFF,'no-iterator':OFF,'no-labels':[ERROR,{allowLoop:true,allowSwitch:true}],'no-lone-blocks':WARNING,'no-loop-func':OFF,'no-magic-numbers':OFF,'no-multi-str':ERROR,'no-native-reassign':[ERROR,{exceptions:['Map','Set']}],'no-new-func':ERROR,'no-new':WARNING,'no-new-wrappers':WARNING,'no-octal-escape':WARNING,'no-octal':WARNING,'no-param-reassign':OFF,'no-process-env':OFF,'no-proto':ERROR,'no-redeclare':OFF,//TODOshouldbeWARNING?'no-return-assign':OFF,'no-script-url':ERROR,'no-self-compare':WARNING,'no-sequences':WARNING,'no-throw-literal':ERROR,'no-useless-call':WARNING,'no-void':OFF,'no-warning-comments':OFF,'no-with':OFF,radix:WARNING,'vars-on-top':OFF,yoda:OFF,'init-declarations':OFF,'no-catch-shadow':ERROR,'no-delete-var':ERROR,'no-label-var':WARNING,'no-shadow-restricted-names':WARNING,'no-undef-init':OFF,'no-undef':ERROR,'no-undefined':OFF,'callback-return':OFF,'global-require':OFF,'handle-callback-err':OFF,'no-mixed-requires':OFF,'no-new-require':OFF,'no-path-concat':OFF,'no-process-exit':OFF,'no-restricted-modules':OFF,'no-sync':OFF,camelcase:[OFF,{properties:'always'}],'consistent-this':[OFF,'self'],'func-names':OFF,'func-style':[OFF,'declaration'],'id-length':OFF,'id-match':OFF,'max-depth':OFF,'max-nested-callbacks':OFF,'max-params':OFF,'max-statements':OFF,'new-cap':OFF,'newline-after-var':OFF,'no-array-constructor':ERROR,'no-continue':OFF,'no-inline-comments':OFF,'no-lonely-if':OFF,'no-negated-condition':OFF,'no-nested-ternary':OFF,'no-new-object':WARNING,'no-plusplus':OFF,'no-ternary':OFF,'no-underscore-dangle':OFF,'no-unneeded-ternary':WARNING,'one-var':[WARNING,{initialized:'never'}],'operator-assignment':[WARNING,'always'],'require-jsdoc':OFF,'sort-vars':OFF,'spaced-comment':[OFF,'always',{exceptions:['jshint','jslint','eslint','global']},],'constructor-super':ERROR,'no-class-assign':WARNING,'no-const-assign':ERROR,'no-dupe-class-members':ERROR,'no-this-before-super':ERROR,'object-shorthand':OFF,'prefer-const':OFF,'prefer-spread':OFF,'prefer-reflect':OFF,'prefer-template':OFF,'require-yield':OFF,'babel/generator-star-spacing':OFF,'babel/new-cap':OFF,'babel/array-bracket-spacing':OFF,'babel/object-curly-spacing':OFF,'babel/object-shorthand':OFF,'babel/arrow-parens':OFF,'babel/no-await-in-loop':OFF,'babel/flow-object-type':OFF,'react/display-name':OFF,'react/forbid-prop-types':OFF,'react/jsx-closing-bracket-location':OFF,'react/jsx-curly-spacing':OFF,'react/jsx-equals-spacing':WARNING,'react/jsx-filename-extension':OFF,'react/jsx-first-prop-new-line':OFF,'react/jsx-handler-names':OFF,'react/jsx-indent':OFF,'react/jsx-indent-props':OFF,'react/jsx-key':OFF,'react/jsx-max-props-per-line':OFF,'react/jsx-no-bind':OFF,'react/jsx-no-duplicate-props':ERROR,'react/jsx-no-literals':OFF,'react/jsx-no-target-blank':OFF,'react/jsx-pascal-case':OFF,'react/jsx-sort-props':OFF,'react/jsx-uses-vars':ERROR,'react/no-comment-textnodes':OFF,'react/no-danger':OFF,'react/no-deprecated':OFF,'react/no-did-mount-set-state':OFF,'react/no-did-update-set-state':OFF,'react/no-direct-mutation-state':OFF,'react/no-multi-comp':OFF,'react/no-render-return-value':OFF,'react/no-set-state':OFF,'react/no-string-refs':OFF,'react/no-unknown-property':OFF,'react/prefer-es6-class':OFF,'react/prefer-stateless-function':OFF,'react/prop-types':OFF,'react/require-extension':OFF,'react/require-optimization':OFF,'react/require-render-return':OFF,'react/sort-comp':OFF,'react/sort-prop-types':OFF,'accessor-pairs':OFF,'brace-style':[ERROR,'1tbs'],'consistent-return':OFF,'dot-location':[ERROR,'property'],//Weuseconsole['error']()asasignaltonottransformit:'dot-notation':[ERROR,{allowPattern:'^(error|warn)$'}],'eol-last':ERROR,eqeqeq:[ERROR,'allow-null'],indent:OFF,'jsx-quotes':[ERROR,'prefer-double'],'keyword-spacing':[ERROR,{after:true,before:true}],'no-bitwise':OFF,'no-console':OFF,'no-inner-declarations':[ERROR,'functions'],'no-multi-spaces':ERROR,'no-restricted-globals':[ERROR].concat(restrictedGlobals),'no-restricted-syntax':[ERROR,'WithStatement',{selector:'MemberExpression[property.name=/^(?:substring|substr)$/]',message:'Preferstring.slice()over.substring()and.substr().',},],'no-shadow':ERROR,'no-unused-vars':[ERROR,{args:'none'}],'no-use-before-define':OFF,'no-useless-concat':OFF,quotes:[ERROR,'single',{avoidEscape:true,allowTemplateLiterals:true}],'space-before-blocks':ERROR,'space-before-function-paren':OFF,'valid-typeof':[ERROR,{requireStringLiterals:true}],//Flowfailswithnon-stringliteralkeys'no-useless-computed-key':OFF,//WeapplythesesettingstofilesthatshouldrunonNode.//Theycan'tuseJSXorES6modules,andmustbeinstrictmode.//Theycan,however,useotherES6features.//(Notetheserulesareoverriddenlaterforsourcefiles.)'no-var':ERROR,strict:ERROR,//EnforcedbyPrettier//TODO:Prettierdoesn'thandlelongstringsorlongcomments.Notabig//deal.ButIturneditoffbecauseloadingtheplugincausessomeobscure//syntaxerroranditdidn'tseemworthinvestigating.'max-len':OFF,//React&JSX//Ourtransformssetthisautomatically'react/jsx-boolean-value':[ERROR,'always'],'react/jsx-no-undef':ERROR,//Wedon'tcaretodothis'react/jsx-sort-prop-types':OFF,'react/jsx-space-before-closing':ERROR,'react/jsx-uses-react':ERROR,'react/no-is-mounted':OFF,//Thisisn'tusefulinourtestcode'react/react-in-jsx-scope':ERROR,'react/self-closing-comp':ERROR,//Wedon'tcaretodothis'react/jsx-wrap-multilines':[ERROR,{declaration:false,assignment:false},],//Preventfor...ofloopsbecausetheyrequireaSymbolpolyfill.//Youcandisablethisruleforcodethatisn'tshipped(e.g.buildscriptsandtests).'no-for-of-loops/no-for-of-loops':ERROR,//Preventfunctiondeclarationsafterreturnstatements'no-function-declare-after-return/no-function-declare-after-return':ERROR,//CUSTOMRULES//thesecondargumentofwarning/invariantshouldbealiteralstring'react-internal/no-primitive-constructors':ERROR,'react-internal/safe-string-coercion':[ERROR,{isProductionUserAppCode:true},],'react-internal/no-to-warn-dev-within-to-throw':ERROR,'react-internal/warning-args':ERROR,'react-internal/no-production-logging':ERROR,},overrides:[{//Bydefault,anythingerrormessagethatappearsthepackagesdirectory//musthaveacorrespondingerrorcode.Theexceptionsaredefined//inthenextoverrideentry.files:['packages/**/*.js'],rules:{'react-internal/prod-error-codes':ERROR,},},{//Thesearefileswhereit'sOKtohaveunminifiederrormessages.These//areenvironmentswherebundlesizeisn'taconcern,liketests//orNode.files:['packages/react-dom/src/test-utils/**/*.js','packages/react-devtools-shared/**/*.js','packages/react-noop-renderer/**/*.js','packages/react-refresh/**/*.js','packages/react-server-dom-esm/**/*.js','packages/react-server-dom-webpack/**/*.js','packages/react-test-renderer/**/*.js','packages/react-debug-tools/**/*.js','packages/react-devtools-extensions/**/*.js','packages/react-devtools-timeline/**/*.js','packages/react-native-renderer/**/*.js','packages/eslint-plugin-react-hooks/**/*.js','packages/jest-react/**/*.js','packages/internal-test-utils/**/*.js','packages/**/__tests__/*.js','packages/**/npm/*.js',],rules:{'react-internal/prod-error-codes':OFF,},},{//Weapplythesesettingstofilesthatweshipthroughnpm.//TheymustbeES5.files:es5Paths,parser:'espree',parserOptions:{ecmaVersion:5,sourceType:'script',},rules:{'no-var':OFF,strict:ERROR,},},{//Weapplythesesettingstothesourcefilesthatgetcompiled.//TheycanuseallfeaturesincludingJSX(butshouldn'tuse`var`).files:esNextPaths,parser:'hermes-eslint',parserOptions:{ecmaVersion:8,sourceType:'module',},rules:{'no-var':ERROR,'prefer-const':ERROR,strict:OFF,},},{files:['**/__tests__/*.js'],rules:{//https://github.com/jest-community/eslint-plugin-jest'jest/no-focused-tests':ERROR,'jest/valid-expect':ERROR,'jest/valid-expect-in-promise':ERROR,},},{files:['**/__tests__/**/*.js','scripts/**/*.js','packages/*/npm/**/*.js','packages/dom-event-testing-library/**/*.js','packages/react-devtools*/**/*.js','dangerfile.js','fixtures','packages/react-dom/src/test-utils/*.js',],rules:{'react-internal/no-production-logging':OFF,'react-internal/warning-args':OFF,'react-internal/safe-string-coercion':[ERROR,{isProductionUserAppCode:false},],},},{files:['scripts/eslint-rules/*.js','packages/eslint-plugin-react-hooks/src/*.js',],plugins:['eslint-plugin'],rules:{'eslint-plugin/prefer-object-rule':ERROR,'eslint-plugin/require-meta-fixable':[ERROR,{catchNoFixerButFixableProperty:true},],'eslint-plugin/require-meta-has-suggestions':ERROR,},},{files:['packages/react-native-renderer/**/*.js',],globals:{nativeFabricUIManager:'readonly',},},{files:['packages/react-server-dom-webpack/**/*.js'],globals:{__webpack_chunk_load__:'readonly',__webpack_require__:'readonly',},},{files:['packages/scheduler/**/*.js'],globals:{TaskController:'readonly',},},],env:{browser:true,es6:true,node:true,jest:true,},globals:{$Call:'readonly',$ElementType:'readonly',$Flow$ModuleRef:'readonly',$FlowFixMe:'readonly',$Keys:'readonly',$NonMaybeType:'readonly',$PropertyType:'readonly',$ReadOnly:'readonly',$ReadOnlyArray:'readonly',$ArrayBufferView:'readonly',$Shape:'readonly',AnimationFrameID:'readonly',//ForFlowtypeannotation.Only`BigInt`isvalidatruntime.bigint:'readonly',BigInt:'readonly',BigInt64Array:'readonly',BigUint64Array:'readonly',Class:'readonly',ClientRect:'readonly',CopyInspectedElementPath:'readonly',DOMHighResTimeStamp:'readonly',EventListener:'readonly',Iterable:'readonly',Iterator:'readonly',JSONValue:'readonly',JSResourceReference:'readonly',MouseEventHandler:'readonly',PropagationPhases:'readonly',PropertyDescriptor:'readonly',React$AbstractComponent:'readonly',React$Component:'readonly',React$ComponentType:'readonly',React$Config:'readonly',React$Context:'readonly',React$Element:'readonly',React$ElementConfig:'readonly',React$ElementProps:'readonly',React$ElementRef:'readonly',React$ElementType:'readonly',React$Key:'readonly',React$Node:'readonly',React$Portal:'readonly',React$Ref:'readonly',React$StatelessFunctionalComponent:'readonly',ReadableStreamController:'readonly',RequestInfo:'readonly',RequestOptions:'readonly',ResponseState:'readonly',StoreAsGlobal:'readonly',symbol:'readonly',SyntheticEvent:'readonly',SyntheticMouseEvent:'readonly',Thenable:'readonly',TimeoutID:'readonly',WheelEventHandler:'readonly',spyOnDev:'readonly',spyOnDevAndProd:'readonly',spyOnProd:'readonly',__DEV__:'readonly',__EXPERIMENTAL__:'readonly',__EXTENSION__:'readonly',__PROFILE__:'readonly',__TEST__:'readonly',__UMD__:'readonly',__VARIANT__:'readonly',gate:'readonly',trustedTypes:'readonly',IS_REACT_ACT_ENVIRONMENT:'readonly',AsyncLocalStorage:'readonly',globalThis:'readonly',},};